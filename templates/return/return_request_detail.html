{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <div class="card shadow">
        <div class="card-header bg-primary text-white">
            <h4><i class="bi bi-box-arrow-left me-1"></i> Return Request Details</h4>
        </div>
        <div class="card-body">
            <p><strong>User:</strong> {{ return_request.user.username }}</p>
            <p><strong>Product:</strong> {{ return_request.product.title }}</p>
            <p><strong>Reason:</strong> {{ return_request.reason }}</p>
            <p><strong>Requested at:</strong> {{ return_request.requested_at }}</p>
            <p><strong>Status:</strong> 
                {% if return_request.approved %}
                    <span class="badge bg-success">Approved</span>
                {% else %}
                    <span class="badge bg-danger">Not Approved</span>
                {% endif %}
            </p>
            {% if return_request.image %}
                <p><strong>Image:</strong><br>
                <img src="{{ return_request.image.url }}" class="img-thumbnail" style="max-width: 300px;"></p>
            {% endif %}

            <hr>

            {% if manual_payment %}
                <h5>Manual Payment Info</h5>
                <p><strong>Card Ending:</strong> **** {{ manual_payment.card_number|slice:"-4:" }}</p>
                <p><strong>Address:</strong> {{ manual_payment.address }}</p>
                <p><strong>Phone:</strong> {{ manual_payment.phone }}</p>
                <p><strong>Submitted:</strong> {{ manual_payment.submitted_at }}</p>
            {% else %}
                <p class="text-muted">No manual payment info found.</p>
            {% endif %}

            <form method="post" class="mt-3 d-inline">
                {% csrf_token %}
                <button name="action" value="approve" class="btn btn-success me-2">Approve</button>
                <button name="action" value="decline" class="btn btn-danger me-2">Decline</button>
            </form>
            <br>
            <!-- ðŸ”™ Return to List button -->
            <a href="{% url 'return_request_list' %}" class="btn btn-secondary mt-3">
                <i class="bi bi-arrow-left-circle"></i> Back to List
            </a>
        </div>
    </div>
</div>
{% endblock %}
